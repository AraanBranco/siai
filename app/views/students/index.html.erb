<div class="columns no-print">
  <% if can? :manage, Student %>
  <div class="column">
    <%= link_to new_student_path, class: "button is-success in-mobile-expand" do %>
      <span class="icon">
        <i class="ion-plus-round"></i>
      </span>
      <span>Novo Estudante</span>
    <% end %>
  </div>
  <% end %>

  <% show_search_error_message(@students, params) %>

  <div class="column">
    <%= form_tag(students_path, :method => "get", id: "search") do %>
      <p class="control has-addons is-pulled-right">
        <span class="select is-hidden-mobile">
          <%= select_tag "order",
            options_for_select([
              ["ID",'id'],
              ["Nome",'name']],
            params[:order]),
            prompt: "Ordenar por",
            onchange: "this.form.submit();" %>
        </span>
        <span class="select is-hidden-mobile">
          <%= select_tag "return",
              options_for_select(["15", "30", "45", "50", "100"],
              params[:return]),
              prompt: "Total",
              onchange: "this.form.submit();" %>
        </span>
        <%= text_field_tag :search, params[:search], class: "input", placeholder: "Buscar" %>
        <%= button_tag(type: "submit", class: "button is-success", name: nil) do %>
        Buscar
        <% end %>
      </p>
    <% end %>
  </div>
</div>

<table class="table is-striped">
  <thead>
    <tr>
      <th>ID</th>
      <th>Foto</th>
      <th>Nome</th>
      <th class="is-hidden-mobile">Curso</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @students.each do |student| %>
    <tr>
      <td><%= student.id %></td>
      <td><%= image_tag student&.photo.thumb %></td>
      <td><%= student.name %></td>
      <td class="is-hidden-mobile"><%= student.course_initial %></td>
      <% if can? :manage, Student %>
        <td class="has-text-right no-print">
          <%= link_to edit_student_path(student), class: 'button is-success in-mobile-expand' do %>
            <span class="icon">
              <i class="ion-edit"></i>
            </span>
            <span>Editar</span>
          <% end %>
          <br>
          <%= link_to student_path(student), method: :delete, data: { confirm: 'Tem certeza que deseja excluir?' }, class: 'button is-danger in-mobile-expand' do %>
            <span class="icon">
              <i class="ion-close"></i>
            </span>
            <span>Excluir</span>
          <% end %>
        </td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @students %>
<br />
